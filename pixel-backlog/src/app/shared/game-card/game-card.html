<div class="game-card" (click)="details.emit()">
  <div class="card-artwork">
    <img [src]="game.coverUrl" alt="Capa de {{game.title}}" class="artwork-image">
    <div class="artwork-overlay"></div>

    @if(game.isPlatinado) {
      <span class="platinum-badge conquered"><i class="material-symbols-outlined">workspace_premium</i></span>
    } @else if (game.willPlatinar) {
      <span class="platinum-badge planned"><i class="material-symbols-outlined">workspace_premium</i></span>
    }

    <span class="status-badge" [ngClass]="game.status.toLowerCase().replace(' ', '-')">{{ game.status }}</span>

    <div class="card-actions">
      <button class="action-btn" (click)="edit.emit(); $event.stopPropagation()" title="Editar Jogo">
        <i class="material-symbols-outlined">edit</i>
      </button>
      <button class="action-btn delete-btn" (click)="onDelete($event)" title="Apagar Jogo">
        <i class="material-symbols-outlined">delete</i>
      </button>
    </div>
  </div>

  <div class="card-info">
    <h3 class="game-title">{{ game.title }}</h3>

    <div class="meta-info">
      <div class="info-item">
        <i class="material-symbols-outlined">extension</i>
        <span>{{ (dlcs$ | async)?.length || 0 }} DLCs</span>
      </div>
      @if (game.playtime) {
        <div class="info-item">
          <i class="material-symbols-outlined">timer</i>
          <span>{{ game.playtime }}</span>
        </div>
      }
    </div>

    @if (game.achievementsTotal && game.achievementsTotal > 0) {
      <div class="progress-container">
        <div class="progress-bar">
          <div class="progress-fill" [style.width.%]="achievementProgress"></div>
        </div>
        <span class="progress-percentage">{{ achievementProgress.toFixed(0) }}%</span>
      </div>
    }
  </div>
</div>