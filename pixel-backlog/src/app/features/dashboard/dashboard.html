@if (isAddDialogOpen) {
  <app-add-game-dialog [gameToEdit]="gameBeingEdited" (close)="closeDialog()"></app-add-game-dialog>
}
@if (isDetailsOpen && selectedGameForDetails) {
  <app-game-details-dialog [game]="selectedGameForDetails" (close)="closeDetailsDialog()"></app-game-details-dialog>
}

<div class="dashboard-container">
  <header class="main-header">
    <button class="logout-btn" (click)="authService.logout()" title="Partir">
      <img src="https://clan.fastly.steamstatic.com/images/35061675/8aa2656fe63912fcdff7bba8cc41e602097f366d.gif" alt="Logout GIF">
    </button>

    <div class="status-filters">
      @for (filter of filterOptions; track filter) {
        <button class="filter-btn" [class.is-active]="backlogService.filter() === filter" (click)="backlogService.filter.set(filter)">
          {{ filter }}
        </button>
      }
    </div>

    <div class="actions-group">
      <div class="search-wrapper">
        <i class="material-symbols-outlined">search</i>
        <input type="text" placeholder="Buscar..." (input)="onSearch($event)">
      </div>
      <button class="add-btn" (click)="openAddDialog()">
        <i class="material-symbols-outlined">add</i>
      </button>
    </div>
  </header>

  <main class="games-grid" [@listAnimation]="backlogService.filteredGames().length">
    @for (game of backlogService.filteredGames(); track game.id) {
      <app-game-card [game]="game" (delete)="onDeleteGame($event)" (edit)="openEditDialog(game)" (details)="openDetailsDialog(game)"></app-game-card>
    } @empty {
      <p class="empty-state">Nenhum jogo encontrado para os filtros atuais.</p>
    }
  </main>
</div>